<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="964px" preserveAspectRatio="none" style="width:1152px;height:964px;background:#FFFFFF;" version="1.1" viewBox="0 0 1152 964" width="1152px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="182" x="484.25" y="28.5352">グリッド選択時のシーケンス</text><rect fill="#FFFFFF" height="788.832" style="stroke:#181818;stroke-width:1.0;" width="10" x="202" y="150.2871"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="325.8398"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="393.4609"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="530.7031"/><rect fill="#FFFFFF" height="32.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="601.3242"/><rect fill="#FFFFFF" height="32.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="769.877"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="188.5977"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="662.9453"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="831.498"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1071" y="911.1191"/><rect fill="none" height="132.2422" style="stroke:#000000;stroke-width:1.5;" width="1066" x="10" y="165.2871"/><rect fill="none" height="132.2422" style="stroke:#000000;stroke-width:1.5;" width="838" x="10" y="370.1504"/><rect fill="none" height="154.5527" style="stroke:#000000;stroke-width:1.5;" width="1003" x="10" y="559.7031"/><rect fill="none" height="154.5527" style="stroke:#000000;stroke-width:1.5;" width="919" x="10" y="728.2559"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="118.9766" y2="957.1191"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="207" x2="207" y1="118.9766" y2="957.1191"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="545.5" x2="545.5" y1="118.9766" y2="957.1191"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="848" x2="848" y1="118.9766" y2="957.1191"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1075.5" x2="1075.5" y1="118.9766" y2="957.1191"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="20" y="116.0234">Player on Turn</text><ellipse cx="73" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M73,58.9883 L73,85.9883 M60,66.9883 L86,66.9883 M73,85.9883 L60,100.9883 M73,85.9883 L86,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="149" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="156" y="108.0234">TicTacToeView</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="477.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="484.5" y="108.0234">GameGridContext</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="777" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="784" y="108.0234">GameStateContext</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="1005.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1012.5" y="108.0234">GameTurnContext</text><rect fill="#FFFFFF" height="788.832" style="stroke:#181818;stroke-width:1.0;" width="10" x="202" y="150.2871"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="325.8398"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="393.4609"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="530.7031"/><rect fill="#FFFFFF" height="32.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="601.3242"/><rect fill="#FFFFFF" height="32.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="541" y="769.877"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="188.5977"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="662.9453"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="843" y="831.498"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1071" y="911.1191"/><polygon fill="#181818" points="190,146.2871,200,150.2871,190,154.2871,194,150.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73" x2="196" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="80" y="145.5449">selectGameGrid( )</text><path d="M10,165.2871 L77,165.2871 L77,172.5977 L67,182.5977 L10,182.5977 L10,165.2871 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.2422" style="stroke:#000000;stroke-width:1.5;" width="1066" x="10" y="165.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="25" y="178.8555">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167" x="92" y="177.9219">[when game is not 'on_game']</text><polygon fill="#181818" points="831,184.5977,841,188.5977,831,192.5977,835,188.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="837" y1="188.5977" y2="188.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="853" x2="895" y1="217.9082" y2="217.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="895" x2="895" y1="217.9082" y2="230.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="854" x2="895" y1="230.9082" y2="230.9082"/><polygon fill="#181818" points="864,226.9082,854,230.9082,864,234.9082,860,230.9082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="860" y="213.166">check gameMode !== 'on_game'</text><polygon fill="#181818" points="223,256.2188,213,260.2188,223,264.2188,219,260.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="847" y1="260.2188" y2="260.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="229" y="255.4766">boolean</text><polygon fill="#181818" points="84,285.5293,74,289.5293,84,293.5293,80,289.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="201" y1="289.5293" y2="289.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="90" y="284.7871">early return</text><polygon fill="#181818" points="529,321.8398,539,325.8398,529,329.8398,533,325.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="535" y1="325.8398" y2="325.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="219" y="321.0977">getGameGrid(row, col)</text><polygon fill="#181818" points="223,351.1504,213,355.1504,223,359.1504,219,355.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="545" y1="355.1504" y2="355.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="229" y="350.4082">selectedGameGrid</text><path d="M10,370.1504 L77,370.1504 L77,377.4609 L67,387.4609 L10,387.4609 L10,370.1504 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.2422" style="stroke:#000000;stroke-width:1.5;" width="838" x="10" y="370.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="25" y="383.7188">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="225" x="92" y="382.7852">[when selected grid is already occupied]</text><polygon fill="#181818" points="529,389.4609,539,393.4609,529,397.4609,533,393.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="535" y1="393.4609" y2="393.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="551" x2="593" y1="422.7715" y2="422.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="422.7715" y2="435.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="552" x2="593" y1="435.7715" y2="435.7715"/><polygon fill="#181818" points="562,431.7715,552,435.7715,562,439.7715,558,435.7715" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="558" y="418.0293">check selectedGameGrid.occupied === true</text><polygon fill="#181818" points="223,461.082,213,465.082,223,469.082,219,465.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="545" y1="465.082" y2="465.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="229" y="460.3398">boolean</text><polygon fill="#181818" points="84,490.3926,74,494.3926,84,498.3926,80,494.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="201" y1="494.3926" y2="494.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="90" y="489.6504">early return</text><polygon fill="#181818" points="529,526.7031,539,530.7031,529,534.7031,533,530.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="535" y1="530.7031" y2="530.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="219" y="525.9609">setGameGrid(row, col, gamePlayerKey, gameTurn)</text><polygon fill="#181818" points="223,540.7031,213,544.7031,223,548.7031,219,544.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="545" y1="544.7031" y2="544.7031"/><path d="M10,559.7031 L77,559.7031 L77,567.0137 L67,577.0137 L10,577.0137 L10,559.7031 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="154.5527" style="stroke:#000000;stroke-width:1.5;" width="1003" x="10" y="559.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="25" y="573.2715">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="92" y="572.3379">[when player wins]</text><polygon fill="#181818" points="529,597.3242,539,601.3242,529,605.3242,533,601.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="535" y1="601.3242" y2="601.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="219" y="596.582">checkWin(gamePlayerKey)</text><path d="M556,582.0137 L556,607.0137 L1008,607.0137 L1008,592.0137 L998,582.0137 L556,582.0137 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M998,582.0137 L998,592.0137 L1008,592.0137 L998,582.0137 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="562" y="599.582">Three same marks are placed in horizontal, vertical, or diagonal row.</text><polygon fill="#181818" points="223,629.6348,213,633.6348,223,637.6348,219,633.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="545" y1="633.6348" y2="633.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="229" y="628.8926">boolean</text><polygon fill="#181818" points="831,658.9453,841,662.9453,831,666.9453,835,662.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="837" y1="662.9453" y2="662.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="219" y="658.2031">setGameEndWithWin(gamePlayerKey)</text><polygon fill="#181818" points="223,672.9453,213,676.9453,223,680.9453,219,676.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="847" y1="676.9453" y2="676.9453"/><polygon fill="#181818" points="84,702.2559,74,706.2559,84,710.2559,80,706.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="201" y1="706.2559" y2="706.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="90" y="701.5137">early return</text><path d="M10,728.2559 L77,728.2559 L77,735.5664 L67,745.5664 L10,745.5664 L10,728.2559 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="154.5527" style="stroke:#000000;stroke-width:1.5;" width="919" x="10" y="728.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="25" y="741.8242">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="92" y="740.8906">[when game is draw]</text><polygon fill="#181818" points="529,765.877,539,769.877,529,773.877,533,769.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="535" y1="769.877" y2="769.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="219" y="765.1348">checkDraw(gamePlayerKey)</text><path d="M556,750.5664 L556,775.5664 L792,775.5664 L792,760.5664 L782,750.5664 L556,750.5664 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M782,750.5664 L782,760.5664 L792,760.5664 L782,750.5664 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="562" y="768.1348">All grids are occupied with marks.</text><polygon fill="#181818" points="223,798.1875,213,802.1875,223,806.1875,219,802.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="545" y1="802.1875" y2="802.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="229" y="797.4453">boolean</text><polygon fill="#181818" points="831,827.498,841,831.498,831,835.498,835,831.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="837" y1="831.498" y2="831.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="219" y="826.7559">setGameEndWithDraw( )</text><polygon fill="#181818" points="223,841.498,213,845.498,223,849.498,219,845.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="847" y1="845.498" y2="845.498"/><polygon fill="#181818" points="84,870.8086,74,874.8086,84,878.8086,80,874.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="201" y1="874.8086" y2="874.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="90" y="870.0664">early return</text><polygon fill="#181818" points="1059,907.1191,1069,911.1191,1059,915.1191,1063,911.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="1065" y1="911.1191" y2="911.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="219" y="906.377">advanceGameTurn( )</text><polygon fill="#181818" points="223,921.1191,213,925.1191,223,929.1191,219,925.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="217" x2="1075" y1="925.1191" y2="925.1191"/><polygon fill="#181818" points="84,935.1191,74,939.1191,84,943.1191,80,939.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="206" y1="939.1191" y2="939.1191"/><!--MD5=[f4a8deab0ce38daefedd1a86b71698d3]
@startuml
title グリッド選択時のシーケンス
hide footbox

Actor "Player on Turn" as Player
participant "TicTacToeView" as TicTacToeView
participant "GameGridContext" as GameGrid
participant "GameStateContext" as GameState
participant "GameTurnContext" as GameTurn

Player -> TicTacToeView: selectGameGrid( )
activate TicTacToeView

opt when game is not 'on_game'
    TicTacToeView -> GameState:
    activate GameState
    GameState -> GameState: check gameMode !== 'on_game'
    GameState - -> TicTacToeView: boolean
    deactivate GameState
    TicTacToeView - -> Player: early return
end

TicTacToeView -> GameGrid: getGameGrid(row, col)
activate GameGrid
GameGrid - -> TicTacToeView: selectedGameGrid
deactivate GameGrid

opt when selected grid is already occupied
    TicTacToeView -> GameGrid
    activate GameGrid
    GameGrid -> GameGrid: check selectedGameGrid.occupied === true
    GameGrid - -> TicTacToeView:boolean
    deactivate GameGrid
    TicTacToeView - -> Player: early return
end

TicTacToeView -> GameGrid: setGameGrid(row, col, gamePlayerKey, gameTurn)
activate GameGrid
GameGrid - -> TicTacToeView:
deactivate GameGrid

opt when player wins
    TicTacToeView -> GameGrid: checkWin(gamePlayerKey)
    note right
    	 Three same marks are placed in horizontal, vertical, or diagonal row.
    end note
    activate GameGrid
    GameGrid - -> TicTacToeView: boolean
    deactivate GameGrid

    TicTacToeView -> GameState: setGameEndWithWin(gamePlayerKey)
    activate GameState
    GameState - -> TicTacToeView
    deactivate GameState
    TicTacToeView - -> Player: early return
end

opt when game is draw
    TicTacToeView -> GameGrid: checkDraw(gamePlayerKey)
    note right
    	 All grids are occupied with marks.
    end note
    activate GameGrid
    GameGrid - -> TicTacToeView: boolean
    deactivate GameGrid

    TicTacToeView -> GameState: setGameEndWithDraw( )
    activate GameState
    GameState - -> TicTacToeView
    deactivate GameState
    TicTacToeView - -> Player: early return
end

TicTacToeView -> GameTurn: advanceGameTurn( )
activate GameTurn
GameTurn - -> TicTacToeView
deactivate GameTurn

TicTacToeView - -> Player: 
deactivate TicTacToeView

@enduml

PlantUML version 1.2022.13(Sat Nov 19 22:22:17 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>